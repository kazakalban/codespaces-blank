"""
–ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ" –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–î–∞–≤–∞–π—Ç–µ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø–æ–∫–∞ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å –≤—Å–µ–≥–æ –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–∞. 
–ù–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:

–°–æ—Å—Ç–æ—è–Ω–∏–µ "–ò–≥—Ä–∞" –∏–ª–∏ "–ù–µ –∏–≥—Ä–∞"
–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ –±–æ—Ç–æ–º —á–∏—Å–ª–æ
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ø—ã—Ç–æ–∫
–°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –±—ã–ª–æ –∏–≥—Ä —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–í —Å–∫–æ–ª—å–∫–∏—Ö –∏–≥—Ä–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∏–≥—Ä–∞–ª
"""

import random 

from aiogram import Bot, Dispatcher, F
from aiogram.filters import Command, CommandStart
from aiogram.types import Message

from private_for_API import BOT_TOKEN


#–°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –±–æ—Ç–∞ 
bot = Bot(BOT_TOKEN)
dp = Dispatcher()

#–ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –∏–≥—Ä–µ
ATTEMPTS = 5

#–°–ª–æ–≤–∞—Ä—å –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user = {'in_game':False,
        'secret_number': None,
        'attempts': None,
        'total_games': 0,
        'wins': 0}

# File ID —Å—Ç–∏–∫–µ—Ä–∞ (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)
STICKER_ID = "CAACAgIAAxkBAAICKGfFl2yV7-7VAAHz8US_hs67xRXdkAAChxUAAiMAAaBLV73BzYKM-wI2BA"

# –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Å–ª—É—á–∞–π–Ω–æ–µ —Ü–µ–ª–æ–µ —Ü–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100
def get_random_number() -> int:
    return random.randint(1, 100)

#@dp.message()
#async def get_sticker_id(message: Message):
#    if message.sticker:
#        await message.answer(f"–í–æ—Ç —Ç–≤–æ–π file_id:\n{message.sticker.file_id}")


# –≠—Ç–æ—Ç —Ö–µ–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/start"
@dp.message(CommandStart())
async def process_start_command(message: Message):
    await bot.send_sticker(message.chat.id, STICKER_ID)
    await message.answer(
        'üëã –ü—Ä–∏–≤–µ—Ç!\n\nüé≤ –î–∞–≤–∞–π—Ç–µ —Å—ã–≥—Ä–∞–µ–º –≤ –∏–≥—Ä—É *"–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"!*üî¢\n\n'
        'üìú –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã –∏ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥,' 
        '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /help üÜò',
        parse_mode='Markdown'
    )


# –≠—Ç–æ—Ç —Ö–µ–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/help"
@dp.message(Command(commands='help'))
async def proccess_help_command(message:Message):
    await message.answer(
        "üéØ *–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:*\n\n"
        "ü§ñ –Ø –∑–∞–≥–∞–¥—ã–≤–∞—é —á–∏—Å–ª–æ –æ—Ç *1 –¥–æ 100*, –∞ –≤–∞–º –Ω—É–∂–Ω–æ –µ–≥–æ —É–≥–∞–¥–∞—Ç—å! üî¢\n"
        f"üéå –£ –≤–∞—Å –µ—Å—Ç—å *{ATTEMPTS}* –ø–æ–ø—ã—Ç–æ–∫!\n\n"
        "üìú *–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:*\n"
        "üÜò /help - –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã –∏ —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥\n"
        "‚ùå /cancel - –≤—ã–π—Ç–∏ –∏–∑ –∏–≥—Ä—ã\n"
        "üìä /stat - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É\n\n"
        "üî• –î–∞–≤–∞–π —Å—ã–≥—Ä–∞–µ–º? üòÉ\n"
        "üí¨ –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏–≥—Ä–∞—Ç—å, –Ω–∞–ø–∏—à–∏: *–¥–∞*, *–¥–∞–≤–∞–π*, *—Å—ã–≥—Ä–∞–µ–º*, *–∏–≥—Ä–∞*, *–∏–≥—Ä–∞—Ç—å*, *—Ö–æ—á—É –∏–≥—Ä–∞—Ç—å*! üéÆ",
        parse_mode='Markdown'
    )

# –≠—Ç–æ—Ç —Ö–µ–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/stat"
@dp.message(Command(commands='stat'))
async def process_stat_command(message:Message):
    await message.answer(
        f"üìä *–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:*\n\n"
        f"üéÆ *–í—Å–µ–≥–æ –∏–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ:* {user['total_games']}\n"
        f"üèÜ *–ò–≥—Ä –≤—ã–∏–≥—Ä–∞–Ω–æ:* {user['wins']}\n\n"
        "–ü—Ä–æ–¥–æ–ª–∂–∏–º –∏–≥—Ä—É? üî•",
        parse_mode="Markdown"
    )


# –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/cancel"
@dp.message(Command(commands='cancel'))
async def proccess_cancel_command(message: Message):
    if user['in_game']:
        user['in_game'] = False
        await message.answer(
            "‚ùå *–í—ã –≤—ã—à–ª–∏ –∏–∑ –∏–≥—Ä—ã.*\n\n"
            "üòå –û—Ç–¥–æ—Ö–Ω–∏—Ç–µ, –Ω–æ –µ—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏—Ç–µ —Å—ã–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ"
            " *–¥–∞*, *–¥–∞–≤–∞–π*, *—Å—ã–≥—Ä–∞–µ–º* –∏–ª–∏ *–∏–≥—Ä–∞*! üéÆüî•",
            parse_mode="Markdown"
        )
    else:
        await message.answer(
            "ü§î *–ê –º—ã –∏ —Ç–∞–∫ —Å –≤–∞–º–∏ –Ω–µ –∏–≥—Ä–∞–µ–º.*\n\n"
            "üé≤ –ú–æ–∂–µ—Ç, —Å—ã–≥—Ä–∞–µ–º —Ä–∞–∑–æ–∫? –ë—É–¥–µ—Ç –≤–µ—Å–µ–ª–æ! üî•\n"
            "–ù–∞–ø–∏—à–∏—Ç–µ *–¥–∞*, *–¥–∞–≤–∞–π*, *—Å—ã–≥—Ä–∞–µ–º* –∏–ª–∏ *–∏–≥—Ä–∞*, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å! üéÆ",
            parse_mode="Markdown"        
        )


# –≠—Ç–æ—Ç —Ö–µ–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ —Å–æ–≥–ª–∞—Å–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—ã–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—É
@dp.message(F.text.lower().in_ ['–¥–∞', '–¥–∞–≤–∞–π', '—Å—ã–≥—Ä–∞–µ–º', '–∏–≥—Ä–∞',
                                '–∏–≥—Ä–∞—Ç—å', '—Ö–æ—á—É –∏–≥—Ä–∞—Ç—å'])
async def proccess_positive_answer(message: Message):
    if not user['in_game']:
        user['in_game'] = True
        user['secret_number'] = get_random_number()
        user['attempts'] = ATTEMPTS
        await message.answer(
            '–£—Ä–∞!\n\n–Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100, '
            '–ø–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å!'
        )
    else:
        await message.answer(
            '–ü–æ–∫–∞ –º—ã –∏–≥—Ä–∞–µ–º –≤ –∏–≥—Ä—É —è –º–æ–≥—É '
            '—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ —á–∏—Å–ª–∞ –æ—Ç 1 –¥–æ 100 '
            '–∏ –∫–æ–º–∞–Ω–¥—ã /cancel –∏ /stat'
        )





if __name__ == '__main__':
    dp.run_polling(bot)